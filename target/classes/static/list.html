<html>
<head>
    <title>List Editor</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type = "text/css" href="listStyle.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</head>
<body>

<div class="container" id = "add">
    <h2>Add new student</h2>
    Name: <input type="text" id="name"/>
    <button onclick="add()">Add</button>

    <h2>List of students</h2>
    <div id="studentList"></div>
    <p><strong></strong></p>
</div>


</body>

</html>
<script>

getStudents()

    function add(){ //post

      var name = document.getElementById('name').value //get value from an html element

     fetch('http://localhost:8080/students', {
             headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
             },
             method: "POST",
             body: JSON.stringify({name: name})

     }).then(res => getStudents())


        console.log('Added')
    }

    function getStudents(){

        var studentList = document.getElementById('studentList')

        studentList.innerHTML = ''

        fetch('http://localhost:8080/students')
        .then(res => res.json())
        .then(json => {

            for(i=0; i<json.length; i++){

                var id = json[i].id

                var deleteLink = `<button onclick='deleteStudent(${id})'>Delete</button>`

               studentList.innerHTML += '<div>'+ json[i].name + deleteLink + '</div>'

            }

        })

    }

    function deleteStudent(id){
          fetch('http://localhost:8080/students/'+id, {
            method: 'delete'
          })
          .then(res=> getStudents())
    }

</script>