<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Patient profile</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src='https://kit.fontawesome.com/a076d05399.js'></script>
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
</head>
<body onload="getPatients()">


<div class="container">
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 toppad" >
            <div class="panel panel-info">
                <div class="panel-heading">
                    <h3 class="panel-title" id="patientUserName"></h3>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-3 col-lg-3 " align="center">
                            <img alt="User Pic" src="https://genk.mediacdn.vn/2019/7/17/screen-shot-2019-07-17-at-65546-pm-1563364577219920569996.jpg" class="img-circle img-responsive">
                        </div>
                        <div class=" col-md-4 col-lg-4 ">
                            <table class="table table-user-information">
                                <tbody>
                                <tr>
                                    <td>First Name:</td>
                                    <td id="FirstName"></td>
                                </tr>
                                <tr>
                                    <td>Last Name:</td>
                                    <td id="LastName"></td>
                                </tr>
                                <tr>
                                    <td>Date of Birth:</td>
                                    <td id="DOB"></td>
                                </tr>

                                <tr>
                                <tr>
                                    <td>Gender:</td>
                                    <td id="Gender"></td>
                                </tr>
                                <tr>
                                    <td>Home Address:</td>
                                    <td id="Address"></td>
                                </tr>
                                <tr>
                                    <td>Email:</td>
                                    <td id="Email"><a href="mailto:info@support.com"></a></td>
                                </tr>
                                <td>Phone Number:</td>
                                <td id="Phone"></td>

                                </tr>

                                </tbody>
                            </table>
                        </div>
                        <div class=" col-md-4 col-lg-4 ">
                            <table class="table table-user-information">
                                <tbody>
                                <tr>
                                    <td>Allergies:</td>
                                    <td id="allergies"></td>
                                </tr>
                                <tr>
                                    <td>Blood Type:</td>
                                    <td id="bloodType"></td>
                                </tr>
                                <tr>
                                    <td>Medical History:</td>
                                    <td id="medicalHistory"></td>
                                </tr>

                                <tr>
                                <tr>
                                    <td>Health Status:</td>
                                    <td id="healthStatus"></td>
                                </tr>


                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="panel-footer">
                        <a data-original-title="Broadcast Message" data-toggle="tooltip" type="button" class="btn btn-sm btn-primary"><i class="glyphicon glyphicon-envelope"></i></a>
                        <span class="pull-right">
                            <a href="http://localhost:8080/static/patientEditProfile.html" data-original-title="Edit this user" data-toggle="tooltip" type="button" class="btn btn-sm btn-warning"><i class="glyphicon glyphicon-edit"></i></a>
                            <a data-original-title="Remove this user" data-toggle="tooltip" type="button" class="btn btn-sm btn-danger"><i class="glyphicon glyphicon-remove"></i></a>
                        </span>
                    </div>

                </div>
            </div>
            <button onclick="debug()">
                For testing only
            </button>
        </div>
    </div>
</div>
</body>
</html>

<script>
    function getPatients(){
        let patientUserName = document.getElementById('patientUserName')
        let FirstName = document.getElementById('FirstName')
        let LastName = document.getElementById('LastName')
        let DOB = document.getElementById('DOB')
        let Gender = document.getElementById('Gender')
        let Address = document.getElementById('Address')
        let Email = document.getElementById('Email')
        let Phone = document.getElementById('Phone')
        let allergies =document.getElementById('allergies')
        let bloodType =document.getElementById('bloodType')
        let healthStatus=document.getElementById('healthStatus')
        let medicalHistory=document.getElementById('medicalHistory')


        patientUserName.innerHTML = ''
        fetch('http://localhost:8080/patients')
            .then(res => res.json())
            .then(json => {
                for(let i=0; i<json.length; i++){
                    let id = json[i].id
                    if ( id === 3) {
                        patientUserName.innerHTML += '<div>' + json[i].fname + json[i].lname + '</div>';
                        FirstName.innerHTML += '<div>' + json[i].fname + '</div>';
                        LastName.innerHTML += '<div>' +  json[i].lname + '</div>';
                        DOB.innerHTML ='<div>' + json[i].dob.toString() +'</div>';
                        Gender.innerHTML += '<div>' +  json[i].gender + '</div>';
                        Address.innerHTML += '<div>' +  json[i].address + '</div>';
                        Email.innerHTML += '<div>' +  json[i].email + '</div>';
                        Phone.innerHTML += '<div>' +  json[i].phone + '</div>';
                        allergies.innerHTML+= '<div>' +  json[i].allergies + '</div>';
                        bloodType.innerHTML+= '<div>' +  json[i].bloodType + '</div>';
                        healthStatus.innerHTML+= '<div>' +  json[i].healthStatus + '</div>';
                        medicalHistory.innerHTML+= '<div>' +  json[i].medicalHistory + '</div>';
                    }
                }
            })
    }

    function debug(){
        let date = new Date('2020-10-10')
        console.log(date.toString())
    }

</script>